<wxs module="filter">
  function getFilteredCategories(categories, searchTerm) {
    if (!searchTerm) {
      return categories;
    }
    
    return categories.filter(function(category) {
      return category.code.toLowerCase().indexOf(searchTerm.toLowerCase()) !== -1 || 
             category.name.toLowerCase().indexOf(searchTerm.toLowerCase()) !== -1;
    });
  }
  
  module.exports = {
    getFilteredCategories: getFilteredCategories
  };
</wxs>

<view class="container">
  <view class="page-header">
    <view class="back-btn" bindtap="navigateBack">è¿”å›</view>
    <view class="page-title">çƒ­é—¨arXivåˆ†ç±»</view>
  </view>

  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <input 
      class="search-input" 
      placeholder="æœç´¢åˆ†ç±»åç§°æˆ–ä»£ç " 
      value="{{searchTerm}}"
      bindinput="onSearchInput"
    />
  </view>

  <!-- åˆ†ç±»åˆ—è¡¨ -->
  <view class="categories-list">
    <block wx:if="{{filter.getFilteredCategories(categories, searchTerm).length > 0}}">
      <view 
        wx:for="{{filter.getFilteredCategories(categories, searchTerm)}}" 
        wx:key="code"
        class="category-card"
        bindtap="navigateToPapers"
        data-category="{{item.code}}"
      >
        <view class="category-info">
          <view class="category-name">{{item.name}}</view>
          <view class="category-code">{{item.code}}</view>
        </view>
        <view class="category-arrow">â†’</view>
      </view>
    </block>
    <block wx:else>
      <view class="empty-state">
        <view class="empty-icon">ğŸ“</view>
        <view class="empty-text">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„åˆ†ç±»</view>
      </view>
    </block>
  </view>
</view> 