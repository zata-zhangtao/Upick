<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UPick - 订阅管理</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body class="bg-gray-100">
    <div id="app" class="min-h-screen">
        <!-- 导航头部 -->
        <nav class="bg-white shadow-lg">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center">
                        <h1 class="text-xl font-bold text-gray-800">UPick</h1>
                        <div class="ml-10 space-x-4">
                            <a href="index.html" class="text-gray-600 hover:text-gray-900">仪表盘</a>
                            <a href="#" class="text-blue-600 font-medium">订阅管理</a>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button @click="showAddSubscriptionModal = true" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">添加订阅</button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- 主要内容 -->
        <main class="max-w-7xl mx-auto px-4 py-8">
            <!-- 订阅列表部分 -->
            <section class="mb-8">
                <h2 class="text-2xl font-semibold mb-4">我的订阅</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- 订阅卡片 -->
                    <div v-for="(subscription, index) in subscriptions" :key="index" class="bg-white p-6 rounded-lg shadow-md">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="text-lg font-semibold">{{ subscription.name }}</h3>
                            <div class="flex space-x-2">
                                <button @click="editSubscription(index)" class="text-blue-600 hover:text-blue-800">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                                    </svg>
                                </button>
                                <button @click="deleteSubscription(index)" class="text-red-600 hover:text-red-800">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <p class="text-gray-600 mb-2">{{ subscription.url }}</p>
                        <div class="mb-3">
                            <span class="text-sm font-medium text-gray-700">提示词：</span>
                            <div class="flex flex-wrap gap-2 mt-1">
                                <span v-for="(prompt, promptIndex) in subscription.prompts" :key="promptIndex" 
                                      class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">
                                    {{ prompt }}
                                </span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center mt-4">
                            <span class="text-sm text-gray-500">上次更新: {{ subscription.lastUpdated }}</span>
                            <button @click="fetchContent(index)" class="px-3 py-1 bg-blue-100 text-blue-600 rounded hover:bg-blue-200">刷新内容</button>
                        </div>
                    </div>
                    
                    <!-- 添加新订阅的占位卡片 -->
                    <div class="bg-white p-6 rounded-lg shadow-md border-2 border-dashed border-gray-300 flex items-center justify-center">
                        <button @click="showAddSubscriptionModal = true" class="text-gray-500 hover:text-gray-700">
                            <span class="block text-3xl mb-2">+</span>
                            <span>添加新订阅</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- 订阅内容展示部分 -->
            <section class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-2xl font-semibold mb-4">订阅内容</h2>
                
                <!-- 筛选和排序控件 -->
                <div class="flex flex-wrap justify-between items-center mb-6">
                    <div class="flex space-x-4 mb-4 md:mb-0">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">订阅源</label>
                            <select v-model="contentFilter.source" class="px-3 py-2 border rounded-md">
                                <option value="all">全部来源</option>
                                <option v-for="(subscription, index) in subscriptions" :key="index" :value="index">
                                    {{ subscription.name }}
                                </option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">提示词</label>
                            <select v-model="contentFilter.prompt" class="px-3 py-2 border rounded-md">
                                <option value="all">全部提示词</option>
                                <option v-for="prompt in allPrompts" :key="prompt" :value="prompt">
                                    {{ prompt }}
                                </option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">排序方式</label>
                        <select v-model="contentFilter.sort" class="px-3 py-2 border rounded-md">
                            <option value="newest">最新优先</option>
                            <option value="oldest">最早优先</option>
                            <option value="relevance">相关性优先</option>
                        </select>
                    </div>
                </div>
                
                <!-- 内容列表 -->
                <div v-if="filteredContents.length > 0" class="space-y-6">
                    <div v-for="(content, index) in filteredContents" :key="index" class="border-b pb-6 last:border-b-0">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-lg font-medium text-gray-900">{{ content.title }}</h3>
                            <span class="text-sm text-gray-500">{{ content.date }}</span>
                        </div>
                        <p class="text-gray-600 mb-3">{{ content.summary }}</p>
                        <div class="flex justify-between items-center">
                            <div>
                                <span class="text-sm text-blue-600">{{ getSubscriptionName(content.sourceId) }}</span>
                                <div class="flex flex-wrap gap-2 mt-1">
                                    <span v-for="(matchedPrompt, promptIndex) in content.matchedPrompts" :key="promptIndex" 
                                          class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">
                                        {{ matchedPrompt }}
                                    </span>
                                </div>
                            </div>
                            <a :href="content.url" target="_blank" class="px-3 py-1 bg-blue-100 text-blue-600 rounded hover:bg-blue-200">查看原文</a>
                        </div>
                    </div>
                </div>
                
                <!-- 无内容时的提示 -->
                <div v-else class="py-12 text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                    </svg>
                    <p class="text-gray-600">暂无匹配的订阅内容</p>
                    <p class="text-gray-500 text-sm mt-2">尝试添加新的订阅或修改筛选条件</p>
                </div>
                
                <!-- 加载更多按钮 -->
                <div v-if="filteredContents.length > 0" class="mt-6 text-center">
                    <button @click="loadMoreContent" class="px-4 py-2 border rounded-md hover:bg-gray-50">加载更多</button>
                </div>
            </section>
        </main>
        
        <!-- 添加/编辑订阅的模态框 -->
        <div v-if="showAddSubscriptionModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-2xl">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-semibold">{{ editingIndex === null ? '添加新订阅' : '编辑订阅' }}</h3>
                    <button @click="closeSubscriptionModal" class="text-gray-500 hover:text-gray-700">
                        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="space-y-4">
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-700">订阅名称</label>
                        <input type="text" v-model="currentSubscription.name" class="w-full px-3 py-2 border rounded-md" placeholder="输入一个易于识别的名称">
                    </div>
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-700">网站URL</label>
                        <input type="url" v-model="currentSubscription.url" class="w-full px-3 py-2 border rounded-md" placeholder="https://example.com">
                    </div>
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-700">提示词</label>
                        <div class="flex items-center space-x-2">
                            <input type="text" v-model="newPrompt" @keyup.enter="addPrompt" class="flex-1 px-3 py-2 border rounded-md" placeholder="输入提示词并按回车添加">
                            <button @click="addPrompt" class="px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">添加</button>
                        </div>
                        <div class="flex flex-wrap gap-2 mt-2">
                            <div v-for="(prompt, index) in currentSubscription.prompts" :key="index" 
                                 class="px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded-full flex items-center">
                                {{ prompt }}
                                <button @click="removePrompt(index)" class="ml-1 text-blue-800 hover:text-blue-900">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-700">更新频率</label>
                        <select v-model="currentSubscription.updateFrequency" class="w-full px-3 py-2 border rounded-md">
                            <option value="hourly">每小时</option>
                            <option value="daily">每天</option>
                            <option value="weekly">
                                <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UPick - 订阅管理</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>
<body class="bg-gray-100">
    <div id="app" class="min-h-screen">
        <!-- 导航头部 -->
        <nav class="bg-white shadow-lg">
            <div class="max-w-7xl mx-auto px-4">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center">
                        <h1 class="text-xl font-bold text-gray-800">UPick</h1>
                        <div class="ml-10 space-x-4">
                            <a href="index.html" class="text-gray-600 hover:text-gray-900">仪表盘</a>
                            <a href="#" class="text-blue-600 font-medium">订阅管理</a>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button @click="showAddSubscriptionModal = true" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">添加订阅</button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- 主要内容 -->
        <main class="max-w-7xl mx-auto px-4 py-8">
            <!-- 订阅列表部分 -->
            <section class="mb-8">
                <h2 class="text-2xl font-semibold mb-4">我的订阅</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- 订阅卡片 -->
                    <div v-for="(subscription, index) in subscriptions" :key="index" class="bg-white p-6 rounded-lg shadow-md">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="text-lg font-semibold">{{ subscription.name }}</h3>
                            <div class="flex space-x-2">
                                <button @click="editSubscription(index)" class="text-blue-600 hover:text-blue-800">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                                    </svg>
                                </button>
                                <button @click="deleteSubscription(index)" class="text-red-600 hover:text-red-800">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <p class="text-gray-600 mb-2">{{ subscription.url }}</p>
                        <div class="mb-3">
                            <span class="text-sm font-medium text-gray-700">提示词：</span>
                            <div class="flex flex-wrap gap-2 mt-1">
                                <span v-for="(prompt, promptIndex) in subscription.prompts" :key="promptIndex" 
                                      class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">
                                    {{ prompt }}
                                </span>
                            </div>
                        </div>
                        <div class="flex justify-between items-center mt-4">
                            <span class="text-sm text-gray-500">上次更新: {{ subscription.lastUpdated }}</span>
                            <button @click="fetchContent(index)" class="px-3 py-1 bg-blue-100 text-blue-600 rounded hover:bg-blue-200">刷新内容</button>
                        </div>
                    </div>
                    
                    <!-- 添加新订阅的占位卡片 -->
                    <div class="bg-white p-6 rounded-lg shadow-md border-2 border-dashed border-gray-300 flex items-center justify-center">
                        <button @click="showAddSubscriptionModal = true" class="text-gray-500 hover:text-gray-700">
                            <span class="block text-3xl mb-2">+</span>
                            <span>添加新订阅</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- 订阅内容展示部分 -->
            <section class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-2xl font-semibold mb-4">订阅内容</h2>
                
                <!-- 筛选和排序控件 -->
                <div class="flex flex-wrap justify-between items-center mb-6">
                    <div class="flex space-x-4 mb-4 md:mb-0">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">订阅源</label>
                            <select v-model="contentFilter.source" class="px-3 py-2 border rounded-md">
                                <option value="all">全部来源</option>
                                <option v-for="(subscription, index) in subscriptions" :key="index" :value="index">
                                    {{ subscription.name }}
                                </option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">提示词</label>
                            <select v-model="contentFilter.prompt" class="px-3 py-2 border rounded-md">
                                <option value="all">全部提示词</option>
                                <option v-for="prompt in allPrompts" :key="prompt" :value="prompt">
                                    {{ prompt }}
                                </option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">排序方式</label>
                        <select v-model="contentFilter.sort" class="px-3 py-2 border rounded-md">
                            <option value="newest">最新优先</option>
                            <option value="oldest">最早优先</option>
                            <option value="relevance">相关性优先</option>
                        </select>
                    </div>
                </div>
                
                <!-- 内容列表 -->
                <div v-if="filteredContents.length > 0" class="space-y-6">
                    <div v-for="(content, index) in filteredContents" :key="index" class="border-b pb-6 last:border-b-0">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-lg font-medium text-gray-900">{{ content.title }}</h3>
                            <span class="text-sm text-gray-500">{{ content.date }}</span>
                        </div>
                        <p class="text-gray-600 mb-3">{{ content.summary }}</p>
                        <div class="flex justify-between items-center">
                            <div>
                                <span class="text-sm text-blue-600">{{ getSubscriptionName(content.sourceId) }}</span>
                                <div class="flex flex-wrap gap-2 mt-1">
                                    <span v-for="(matchedPrompt, promptIndex) in content.matchedPrompts" :key="promptIndex" 
                                          class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">
                                        {{ matchedPrompt }}
                                    </span>
                                </div>
                            </div>
                            <a :href="content.url" target="_blank" class="px-3 py-1 bg-blue-100 text-blue-600 rounded hover:bg-blue-200">查看原文</a>
                        </div>
                    </div>
                </div>
                
                <!-- 无内容时的提示 -->
                <div v-else class="py-12 text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-gray-400 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                    </svg>
                    <p class="text-gray-600">暂无匹配的订阅内容</p>
                    <p class="text-gray-500 text-sm mt-2">尝试添加新的订阅或修改筛选条件</p>
                </div>
                
                <!-- 加载更多按钮 -->
                <div v-if="filteredContents.length > 0" class="mt-6 text-center">
                    <button @click="loadMoreContent" class="px-4 py-2 border rounded-md hover:bg-gray-50">加载更多</button>
                </div>
            </section>
        </main>
        
        <!-- 添加/编辑订阅的模态框 -->
        <div v-if="showAddSubscriptionModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-2xl">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-semibold">{{ editingIndex === null ? '添加新订阅' : '编辑订阅' }}</h3>
                    <button @click="closeSubscriptionModal" class="text-gray-500 hover:text-gray-700">
                        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="space-y-4">
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-700">订阅名称</label>
                        <input type="text" v-model="currentSubscription.name" class="w-full px-3 py-2 border rounded-md" placeholder="输入一个易于识别的名称">
                    </div>
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-700">网站URL</label>
                        <input type="url" v-model="currentSubscription.url" class="w-full px-3 py-2 border rounded-md" placeholder="https://example.com">
                    </div>
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-700">提示词</label>
                        <div class="flex items-center space-x-2">
                            <input type="text" v-model="newPrompt" @keyup.enter="addPrompt" class="flex-1 px-3 py-2 border rounded-md" placeholder="输入提示词并按回车添加">
                            <button @click="addPrompt" class="px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">添加</button>
                        </div>
                        <div class="flex flex-wrap gap-2 mt-2">
                            <div v-for="(prompt, index) in currentSubscription.prompts" :key="index" 
                                 class="px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded-full flex items-center">
                                {{ prompt }}
                                <button @click="removePrompt(index)" class="ml-1 text-blue-800 hover:text-blue-900">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-700">更新频率</label>
                        <select v-model="currentSubscription.updateFrequency" class="w-full px-3 py-2 border rounded-md">
                            <option value="hourly">每小时</option>
                            <option value="daily">每天</option>
                            <option value="weekly">每周</option>
                            <option value="monthly">每月</option>
                            <option value="weekly">每周</option>
                            <option value="monthly">每月</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-4 mt-6">
                        <button @click="closeSubscriptionModal" class="px-4 py-2 border rounded-md hover:bg-gray-100">取消</button>
                        <button @click="saveSubscription" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">保存</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue

        createApp({
            data() {
                return {
                    // 订阅列表
                    subscriptions: [
                        {
                            name: '科技新闻',
                            url: 'https://example.com/tech',
                            prompts: ['人工智能', '机器学习', '大模型'],
                            lastUpdated: '今天 08:30',
                            updateFrequency: 'daily'
                        },
                        {
                            name: '开发者博客',
                            url: 'https://dev.example.com',
                            prompts: ['Python', 'JavaScript', '前端开发'],
                            lastUpdated: '昨天 15:45',
                            updateFrequency: 'weekly'
                        }
                    ],
                    // 内容列表
                    contents: [
                        {
                            id: 1,
                            sourceId: 0,
                            title: '人工智能在医疗领域的最新应用',
                            summary: '本文探讨了人工智能如何改变医疗诊断和治疗方法，包括影像识别、药物研发和个性化治疗方案等方面的突破。',
                            url: 'https://example.com/tech/ai-medical',
                            date: '2023-05-15 10:30',
                            matchedPrompts: ['人工智能', '大模型']
                        },
                        {
                            id: 2,
                            sourceId: 0,
                            title: '大模型训练成本分析',
                            summary: '随着模型规模不断扩大，训练成本呈指数级增长。本文分析了当前主流大模型的训练成本结构及优化方法。',
                            url: 'https://example.com/tech/llm-cost',
                            date: '2023-05-14 16:45',
                            matchedPrompts: ['人工智能', '机器学习', '大模型']
                        },
                        {
                            id: 3,
                            sourceId: 1,
                            title: 'JavaScript 新特性解析',
                            summary: 'ECMAScript 2023带来了哪些新特性？本文详细介绍了新的语法糖、性能优化和API变更。',
                            url: 'https://dev.example.com/js-features',
                            date: '2023-05-13 09:15',
                            matchedPrompts: ['JavaScript', '前端开发']
                        }
                    ],
                    // 筛选和排序设置
                    contentFilter: {
                        source: 'all',
                        prompt: 'all',
                        sort: 'newest'
                    },
                    // 模态框状态
                    showAddSubscriptionModal: false,
                    editingIndex: null,
                    currentSubscription: {
                        name: '',
                        url: '',
                        prompts: [],
                        updateFrequency: 'daily'
                    },
                    newPrompt: '',
                    // 加载状态
                    isLoading: false
                }
            },
            computed: {
                // 获取所有提示词（去重）
                allPrompts() {
                    const prompts = new Set();
                    this.subscriptions.forEach(subscription => {
                        subscription.prompts.forEach(prompt => {
                            prompts.add(prompt);
                        });
                    });
                    return Array.from(prompts);
                },
                // 根据筛选条件过滤内容
                filteredContents() {
                    let result = [...this.contents];
                    
                    // 按来源筛选
                    if (this.contentFilter.source !== 'all') {
                        result = result.filter(content => content.sourceId === parseInt(this.contentFilter.source));
                    }
                    
                    // 按提示词筛选
                    if (this.contentFilter.prompt !== 'all') {
                        result = result.filter(content => 
                            content.matchedPrompts.includes(this.contentFilter.prompt)
                        );
                    }
                    
                    // 排序
                    if (this.contentFilter.sort === 'newest') {
                        result.sort((a, b) => new Date(b.date) - new Date(a.date));
                    } else if (this.contentFilter.sort === 'oldest') {
                        result.sort((a, b) => new Date(a.date) - new Date(b.date));
                    } else if (this.contentFilter.sort === 'relevance') {
                        // 按匹配的提示词数量排序
                        result.sort((a, b) => b.matchedPrompts.length - a.matchedPrompts.length);
                    }
                    
                    return result;
                }
            },
            methods: {
                // 获取订阅名称
                getSubscriptionName(sourceId) {
                    const subscription = this.subscriptions.find(sub => this.subscriptions.indexOf(sub) === sourceId);
                    return subscription ? subscription.name : '未知来源';
                },
                
                // 添加提示词
                addPrompt() {
                    if (this.newPrompt.trim() && !this.currentSubscription.prompts.includes(this.newPrompt.trim())) {
                        this.currentSubscription.prompts.push(this.newPrompt.trim());
                        this.newPrompt = '';
                    }
                },
                
                // 移除提示词
                removePrompt(index) {
                    this.currentSubscription.prompts.splice(index, 1);
                },
                
                // 编辑订阅
                editSubscription(index) {
                    this.editingIndex = index;
                    this.currentSubscription = JSON.parse(JSON.stringify(this.subscriptions[index]));
                    this.showAddSubscriptionModal = true;
                },
                
                // 删除订阅
                deleteSubscription(index) {
                    if (confirm('确定要删除这个订阅吗？')) {
                        this.subscriptions.splice(index, 1);
                        // 同时删除相关内容
                        this.contents = this.contents.filter(content => content.sourceId !== index);
                        // 更新其他内容的sourceId
                        this.contents.forEach(content => {
                            if (content.sourceId > index) {
                                content.sourceId--;
                            }
                        });
                    }
                },
                
                // 关闭模态框
                closeSubscriptionModal() {
                    this.showAddSubscriptionModal = false;
                    this.editingIndex = null;
                    this.currentSubscription = {
                        name: '',
                        url: '',
                        prompts: [],
                        updateFrequency: 'daily'
                    };
                    this.newPrompt = '';
                },
                
                // 保存订阅
                saveSubscription() {
                    // 表单验证
                    if (!this.currentSubscription.name.trim()) {
                        alert('请输入订阅名称');
                        return;
                    }
                    if (!this.currentSubscription.url.trim()) {
                        alert('请输入网站URL');
                        return;
                    }
                    if (this.currentSubscription.prompts.length === 0) {
                        alert('请至少添加一个提示词');
                        return;
                    }
                    
                    // 添加或更新订阅
                    const subscription = {
                        ...this.currentSubscription,
                        lastUpdated: '刚刚'
                    };
                    
                    if (this.editingIndex !== null) {
                        // 更新现有订阅
                        this.subscriptions[this.editingIndex] = subscription;
                    } else {
                        // 添加新订阅
                        this.subscriptions.push(subscription);
                    }
                    
                    // 关闭模态框
                    this.closeSubscriptionModal();
                    
                    // 如果是新订阅，立即获取内容
                    if (this.editingIndex === null) {
                        this.fetchContent(this.subscriptions.length - 1);
                    }
                },
                
                // 获取订阅内容
                async fetchContent(index) {
                    const subscription = this.subscriptions[index];
                    this.isLoading = true;
                    
                    try {
                        // 这里应该是实际的API调用，现在用模拟数据
                        // 模拟API延迟
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        
                        // 模拟获取新内容
                        const newContent = {
                            id: this.contents.length + 1,
                            sourceId: index,
                            title: `${subscription.name}的最新内容`,
                            summary: `这是从${subscription.url}获取的最新内容，匹配了您的提示词：${subscription.prompts.join(', ')}`,
                            url: subscription.url + '/latest',
                            date: new Date().toLocaleString(),
                            matchedPrompts: [...subscription.prompts]
                        };
                        
                        // 添加到内容列表
                        this.contents.unshift(newContent);
                        
                        // 更新订阅的最后更新时间
                        this.subscriptions[index].lastUpdated = '刚刚';
                        
                        alert('内容已更新');
                    } catch (error) {
                        console.error('获取内容失败:', error);
                        alert('获取内容失败，请稍后重试');
                    } finally {
                        this.isLoading = false;
                    }
                },
                
                // 加载更多内容
                loadMoreContent() {
                    // 这里应该是实际的分页加载，现在用模拟数据
                    alert('加载更多功能尚未实现');
                }
            },
            mounted() {
                // 页面加载时可以执行的初始化操作
                console.log('订阅管理页面已加载');
            }
        }).mount('#app')
    </script>
</body>
</html>